{% extends 'base.html.twig' %}

{% block body %}
    <section class="container">
        <div class="row">
            <div class="col-md-12">
                <h4 class="text-center">Demande d'accompte</h4>
            </div>
        </div>
        {{ form_start(form) }}
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form_label(form.nom, "Nom : ", {'label_attr': {'class': ' control-label'}}) }}
                    {# Génération de l'input.#}

                    {{ form_widget(form.nom, {'attr': {'class': ' form-control'}}) }}
                    {{ form_errors(form.nom, { 'attr': {'class': 'red' }}) }}
                </div>
                <div class="form-group col-md-6">
                    {{ form_label(form.prenom, "Prénom : ", {'label_attr': {'class': ' control-label'}}) }}
                    {# Génération de l'input.#}

                    {{ form_widget(form.prenom, {'attr': {'class': ' form-control'}}) }}
                    {{ form_errors(form.prenom, { 'attr': {'class': 'red' }}) }}
                </div>
            </div>
            <div class="row">
                <div style="color: red; font-size: large; text-align: center; text-transform: uppercase" class="col-md-12">
                    <span><em><strong>Les accomptes doivent être demandé avant le 20 de chaque mois. </strong></em></span>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form_label(form.montantAccompte, "Montant demandé en € : ", {'label_attr': {'class': ' control-label'}}) }}
                    {# Génération de l'input.#}

                    {{ form_widget(form.montantAccompte, {'attr': {'class': ' form-control'}}) }}
                    {{ form_errors(form.montantAccompte, { 'attr': {'class': 'red' }}) }}
                </div>
                <div class="form-group col-md-6">
                    {{ form_label(form.dateDemande, "Date de la demande : ", {'label_attr': {'class': ' control-label'}}) }}
                    {# Génération de l'input.#}

                    {{ form_widget(form.dateDemande, {'attr': {'class': ' form-control js-datepicker'}}) }}
                    {{ form_errors(form.dateDemande, { 'attr': {'class': 'red' }}) }}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    {{ form_label(form.obsAccompteConducteur, "Observation éventuelle : ", {'label_attr': {'class': ' control-label'}}) }}
                    {# Génération de l'input.#}

                    {{ form_widget(form.obsAccompteConducteur, {'attr': {'class': ' form-control'}}) }}
                    {{ form_errors(form.obsAccompteConducteur, { 'attr': {'class': 'red' }}) }}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    <button type="submit" class="btn btn-block btn-primary" id="boutonEnvoyer">Envoyer</button>
                </div>
            </div>
        {{ form_end(form) }}
    </section>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        $(document).ready(function () {
           $('#demande_accompte_nom').prop('disabled', true);
           $('#demande_accompte_prenom').prop('disabled', true);
           $('#boutonEnvoyer').click(function (e) {

               var montant = $('#demande_accompte_montantAccompte').val();
               var dateDemande = $('#demande_accompte_dateDemande').val();

               if(isNaN(montant))
               {
                   alert('le montant saisi est incorrect !');
                   return false;
               }

               if(!/^[0-9\/]/.test(dateDemande))
               {
                   alert('la date saisie est incorrecte');
                   return false;
               }


           })



        });
    </script>
{% endblock %}